(function(b){var g={init:function(a){this.settings={};if(a)this.settings=b.extend(this.settings,a);var c=this;c.hide();c.each(function(){var a=b(this),f=b('<div id="ms-'+a.attr("id")+'" class="ms-container"></div>').detach(),d=b('<div class="ms-selectable"></div>').detach(),h=b('<div class="ms-selection"></div>').detach(),i=b("<ul></ul>").detach(),g=b("<ul></ul>").detach();a.data("settings",c.settings);a.children("option").each(function(){var c=b('<li ms-value="'+b(this).val()+'">'+b(this).text()+
"</li>").detach();c.click(function(){a.multiSelect("select",b(this).attr("ms-value"))});i.append(c)});c.settings.selectableHeader&&d.append(c.settings.selectableHeader);d.append(i);c.settings.selectedHeader&&h.append(c.settings.selectedHeader);h.append(g);f.append(d);f.append(h);a.after(f);a.children("option:selected").each(function(){a.multiSelect("select",b(this).val(),"init")})})},select:function(a,c){var e=this,f=e.val()?e.val():[],d=b.inArray(a,f),h=e.find('option[value="'+a+'"]').text();if(d==
-1||c=="init"){var d=b('<li ms-value="'+a+'">'+h+"</li>").detach(),f=b.merge(f,[a]),g=b("#ms-"+e.attr("id")+" .ms-selectable ul"),j=b("#ms-"+e.attr("id")+" .ms-selection ul");g.children('li[ms-value="'+a+'"]').hide();e.val(f);d.click(function(){e.multiSelect("deselect",b(this).attr("ms-value"))});j.append(d);typeof e.data("settings").afterSelect=="function"&&c!="init"&&e.data("settings").afterSelect.call(this,a,h)}},deselect:function(a){var c=this.val()?this.val():[],e=!1,c=b.map(c,function(b){if(b!=
a)return b;else e=!0});if(e){var f=b("#ms-"+this.attr("id")+" .ms-selectable ul"),d=b("#ms-"+this.attr("id")+" .ms-selection ul"),f=f.children('li[ms-value="'+a+'"]'),d=d.children('li[ms-value="'+a+'"]').detach();this.val(c);f.show();d.remove();typeof this.data("settings").afterDeselect=="function"&&this.data("settings").afterDeselect.call(this,a,d.text())}},select_all:function(){var a=this;a.children("option").each(function(){a.multiSelect("select",b(this).val(),"select_all")})},deselect_all:function(){var a=
this;a.children("option").each(function(){a.multiSelect("deselect",b(this).val(),"deselect_all")})}};b.fn.multiSelect=function(a){if(g[a])return g[a].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof a==="object"||!a)return g.init.apply(this,arguments);else console.log&&console.log("Method "+a+" does not exist on jquery.multiSelect")}})(jQuery);